type MarginEvent @entity {
  id: ID!
  trader: String!
  amount: BigInt!
  eventType: String!
  timestamp: Int!
  txHash: String!
  marketId: String!
}

type Order @entity {
  id: ID!
  trader: String!
  isBuy: Boolean!
  price: BigInt!
  amount: BigInt!
  initialAmount: BigInt!
  timestamp: Int!
  status: String!
  marketId: String!
}

type Trade @entity {
  id: ID!
  buyer: String!
  seller: String!
  price: BigInt!
  amount: BigInt!
  timestamp: Int!
  txHash: String!
  buyOrderId: BigInt!
  sellOrderId: BigInt!
  marketId: String!
}

type Candle @entity {
  id: ID!
  resolution: String!
  timestamp: Int!
  openPrice: BigInt!
  highPrice: BigInt!
  lowPrice: BigInt!
  closePrice: BigInt!
  volume: BigInt!
  marketId: String!
}

type LatestCandle @entity {
  id: ID!
  closePrice: BigInt!
  timestamp: Int!
  marketId: String!
}

type Position @entity {
  id: ID!  # marketId-trader
  trader: String!
  size: BigInt!
  entryPrice: BigInt!
  marketId: String!
}
type FundingEvent @entity {
  id: ID!
  eventType: String!  # "GLOBAL_UPDATE" 或 "USER_PAID"
  trader: String      # 仅 USER_PAID 时有值
  cumulativeRate: BigInt
  payment: BigInt     # 仅 USER_PAID 时有值
  timestamp: Int!
  marketId: String!
}
type Liquidation @entity {
  id: ID!
  trader: String!
  liquidator: String!
  amount: BigInt!
  fee: BigInt!
  timestamp: Int!
  txHash: String!
  marketId: String!
}