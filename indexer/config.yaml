name: monad-exchange-indexer
description: Indexer for Monad Perpetual Exchange events (Multi-Market)

field_selection:
  transaction_fields:
    - hash

networks:
  - id: 31337
    start_block: 0
    rpc_config:
      url: http://127.0.0.1:8545
    contracts:
      - name: Exchange
        address:
          - 0x33c5e0c6db699365b5d386069b2b2505c22db05f  # ETH-USD
          - 0x213e6e8c056948280c1e9b061d4e8479bbd7be23  # SOL-USD
          - 0x8bd2b8aa96e00cd7c888a1ee2cdc68551fb3b467  # BTC-USD
        handler: src/EventHandlers.ts
        events:
          - event: MarginDeposited(address indexed trader, uint256 amount)
          - event: MarginWithdrawn(address indexed trader, uint256 amount)
          - event: OrderPlaced(uint256 indexed id, address indexed trader, bool isBuy, uint256 price, uint256 amount)
          - event: OrderRemoved(uint256 indexed id)
          - event: TradeExecuted(uint256 indexed buyOrderId, uint256 indexed sellOrderId, uint256 price, uint256 amount, address buyer, address seller)
          - event: PositionUpdated(address indexed trader, int256 size, uint256 entryPrice)
          - event: Liquidated(address indexed trader, address indexed liquidator, uint256 amount, uint256 reward)
          - event: FundingUpdated(int256 cumulativeFundingRate, uint256 timestamp)
          - event: FundingPaid(address indexed trader, int256 amount)
